<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Live Color</title>
</head>

<body>
  <script>
    function handleStream (source) {
      document.body.append(
        Object.assign(document.createElement('video'), {
          autoplay: true,
          srcObject: source
        })
      );
    }

    navigator.mediaDevices.enumerateDevices()
    .then(function (devices) {
      var sourceId = null;
      
      // enumerate all devices all array-like
      [].forEach.call(devices, function (device) {
        // if there is still no video input, or if this is the rear camera
        if (device.kind == 'videoinput' &&
          (!sourceId || device.label.indexOf('back') !== -1)) {
          sourceId = device.deviceId;
        }
      });
      
      // we didn't find any video input
      if (!sourceId) {
        throw new Error('no video input');
      }

      navigator.mediaDevices.getUserMedia({
        video: {
          sourceId: sourceId
        }
      })
      .then(handleStream)
      .catch(err => {
        alert('error: ' + err.message);
      });
    });
  </script>
</body>

</html>
